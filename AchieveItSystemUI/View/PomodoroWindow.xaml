<Window x:Class="AchieveItSystemUI.PomodoroWindow"
        x:Name="Pomodorowindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:local="clr-namespace:AchieveItSystemUI"
        Title="番茄钟" Height="400" Width="350"
        WindowStartupLocation="CenterScreen">
    <Border Background="#f5f5f5" Padding="20">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 标题 -->

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="9*"/>
                </Grid.ColumnDefinitions>

                <Button Command="{Binding BackPortalCommand}" CommandParameter="{Binding ElementName=Pomodorowindow}">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="Transparent" BorderThickness="0">
                                <TextBlock 
                    FontFamily="{StaticResource SymbolThemeFontFamily}" 
                    Text="&#xE72B;"
                    FontSize="20" 
                    Foreground="Black" 
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"/>
                                    </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <TextBlock Grid.Column="1" Text="番茄工作法" FontSize="24" FontWeight="Bold"
                        HorizontalAlignment="Center"  Margin="0,0,0,20" Foreground="#2c3e50"/>
            </Grid>

            <!-- 自定义标题 -->
            <TextBox Grid.Row="1" Text="{Binding Pomodoro.Title, UpdateSourceTrigger=PropertyChanged}"
                    FontSize="14" Padding="10" Background="White" BorderBrush="#bdc3c7"
                    BorderThickness="1" Margin="0,0,0,15"/>

            <!-- 时间显示 -->
            <TextBlock Grid.Row="2" Text="{Binding Pomodoro.DisplayTime}" FontSize="48"
                      FontWeight="Bold" HorizontalAlignment="Center" Foreground="#e74c3c"
                      Margin="0,0,0,20"/>

            <!-- 状态显示 -->
            <TextBlock Grid.Row="3" Text="{Binding Pomodoro.Status}" FontSize="14"
                      HorizontalAlignment="Center" Foreground="#7f8c8d" Margin="0,0,0,20"/>

            <!-- 控制按钮 -->
            <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                <Button Content="开始" Command="{Binding StartCommand}"
                       Background="#27ae60" Foreground="White" Padding="15,8"
                       Margin="5" FontWeight="Bold"/>
                <Button Content="暂停" Command="{Binding PauseCommand}"
                       Background="#f39c12" Foreground="White" Padding="15,8"
                       Margin="5" FontWeight="Bold"/>
                <Button Content="停止" Command="{Binding StopCommand}"
                       Background="#e74c3c" Foreground="White" Padding="15,8"
                       Margin="5" FontWeight="Bold"/>
                <Button Content="重置" Command="{Binding ResetCommand}"
                       Background="#95a5a6" Foreground="White" Padding="15,8"
                       Margin="5" FontWeight="Bold"/>
            </StackPanel>

            <!-- 时间设置 -->
            <Grid Grid.Row="5" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="工作时间:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox Text="{Binding Pomodoro.WorkDuration}" Width="40"
                            TextAlignment="Center" IsEnabled="{Binding Pomodoro.IsStopped}"/>
                    <TextBlock Text="分钟" VerticalAlignment="Center" Margin="5,0,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="休息时间:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox Text="{Binding Pomodoro.BreakDuration}" Width="40"
                            TextAlignment="Center" IsEnabled="{Binding Pomodoro.IsStopped}"/>
                    <TextBlock Text="分钟" VerticalAlignment="Center" Margin="5,0,0,0"/>
                </StackPanel>
            </Grid>

            <!-- 快捷时间选择 -->
            <StackPanel Grid.Row="6">
                <TextBlock Text="快捷时间选择:" FontWeight="Bold" Margin="0,0,0,10" Foreground="#2c3e50"/>
                <ItemsControl ItemsSource="{Binding QuickTimeOptions}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Content="{Binding Name}"
                                   Command="{Binding DataContext.SelectQuickTimeCommand, 
                                            RelativeSource={RelativeSource AncestorType=Window}}"
                                   CommandParameter="{Binding}"
                                   Background="#3498db" Foreground="White"
                                   Margin="2" Padding="10,5"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Grid>
    </Border>
</Window>